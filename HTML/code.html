<!DOCTYPE html>
<html>
<head>
	<title>Présentation du code - Projet ISN</title>
	<meta charset="UTF-8" />
	<script src="https://use.fontawesome.com/14a8c97e64.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
</head>
	<body>
		<div id="global" class="col-lg-offset-2 col-lg-8">

			<header>
				<div class="head">
					<h1>Messagerie Reseau javascool</h1>
					<p>Vianney Fargere, Lucas Gasté, Francois Morelle</p>
				</div>
			</header>

			<nav>
				<ul><!--
				!--><a href="index.html"><li><i class="fa fa-info-circle" aria-hidden="true"></i> Présentation du projet</li></a><!--
				!--><a href="logiciel.html"><li><i class="fa fa-star" aria-hidden="true"></i> Présentation du logiciel</li></a><!--
				!--><a href="code.html"><li class="actual"><i class="fa fa-code" aria-hidden="true"></i> Présentation du code</li></a><!--
				!--><a href="https://github.com/0x41434142/Chat"><li><i class="fa fa-github"></i> Notre projet sur Github</li></a><!--
			!--></ul>
			</nav>

			<div class="block">
				<div>
					<h1>La classe Serveur et  Client</h1>
					<p>
						Les classes Serveur et Client dérivent de la classe Thread, cela permet d'utiliser la fonction run. Elles implémentent les fonctions d'ActionListener, KeyListener et WindowListener. Ces implémentations nous permettent d'utiliser des fonctions qui récupèrent :
					</p>
					<ul>
						<li>L'état des boutons</li>
						<li>La frappe des touches</li>
						<li>L'état de la fenêtre</li>
					</ul>
					<p>
						Elles sont instanciées dans la fonction principale main()						
					</p>
					<pre class="code">
// Extrait de serveur.jvs
void main()
{
	Serveur serv = new Serveur();
	serv.start();
}

// Extrait de client.jvs
void main()
{
	client socketClient = new client();
}					</pre>
				</div>
			</div>



			<div class="block">
				<div>
					<h1> Les packages et variables</h1>
					<p>
						Nous utilisons des packages qui ont 3 fonctions principales
					</p>
					<ul>
						<li>Le réseau (java.net, java.io)</li>
						<li>L'interface graphique (javax.swing)</li>
						<li>Les utilitaires (java.awt, java.utils)</li>
					</ul>
					<p>
						Les packages "réseaux" permettent d'utiliser des fonctions et variables comme ServerSocket, PrintWriter, getOutputStream() nécessaire à la communication en réseau. <br />
						Les packages "graphiques" fournissent des éléments d'interface graphique tels que JFrame(), JLabel() etc <br />
						Les packages "utilitaires" permettent de faire des opérations ou proposent des fonctions utiles comme générer un nombre pseudo aléatoire.
					</p>
				</div>
			</div>

			<div class="block">
				<div>
					<h1> Les fonctions</h1>
					<p>
						La classe Serveur est composée de 15 fonctions et Client de 14 fonctions. Elles se répartissent en 3 catégories :
					</p>
					<ul>
						<li>L'envoie et réception de données </li>
						<li>L'affichage de données  </li>
						<li>La gestion de l'état de la fenetre</li>
					</ul>
					<p>
						Les fonctions comme send(), sendImage() ou run() se chargent de l'envoie et de la réception de donnée. <br />
						write() est la fonction qui permet d'afficher des données dans la zone prévue à cet effet. keyPressed(), actionPerformed() ou windowClosing() sont appelés lors d'interaction avec la fenêtre ou avec les bouttons.
					</p>
				</div>
			</div>

			<div style="border: none;" class="block">
				<div>
					<h1> Le déroulement des opérations</h1>
					<h2>1. L'algorithme de la classe Serveur</h2>
					<p>
						Lors de l'instanciation de la classe serveur dans le void main le constructeur serveur() est appelé créant l'interface graphique, et méttant les boutons, la fenêtre sur "écoute" et appelant la fonction serveurInitialisation(). <br /><br />

						Celle-ci se charge d'ouvrir un port sur la machine, si l'opération marche le serveur sera alors accessible à travers le client. On met ici le boolean socketOpen à true indiquant que le socket est bien ouvert et qu'il faudra le refermer. socketOpen étant à true la fonction run() est lancée.<br /> <br />

						Elle lance une boucle qui attend qu'un utilisateur se connecte. Si un utilisateur est connecté elle lance une autre boucle qui attend les messages et les affiches. <br /> <br />

						Si un des messages obtenu correspond à close alors on ferme la connexion du client et on retourne à la boucle supérieur pour attendre un autre client. Cependant si on ferme la fenêtre en cliquant sur la croix on ferme la connexion avec le client et le port.
					</p>

					<center><img src="image/organi.png" alt="organigrame" /></center>

					<h2>2. L'algorithme de la classe Client</h2>
					<p>
						Comme pour la classe serveur l'instanciation de la classe client met en place l'interface graphique et d'autres paramètres. Mais contrairement à cette première il faut attendre le clique sur le bouton connexion pour lancer la fonction run().<br /><br />

						Lors d'un appui sur ce boutton la fonction connexion() est appelée. On récupère les données dans les champs, on vérifie le type de donnée et on essaie de se connecter au serveur. Si la connexion réussis on change l'état des boutons et on regarde si c'est le premier lancement. Si c'est le cas on lance la fonction run(). <br /><br />

						La fonction run() est la même que celle pour la classe Server() sauf qu'elle comporte une seule boucle.
					</p>
				</div>
			</div> 
			
		</div>
	</body>
</html>